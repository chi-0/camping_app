# 프로젝트명: 캠핑장 찾는 사이트(캠핑장 검색)

## 제작의도:

- 캠핑을 가고싶은 사람들이 다양한 캠핑장에 대한 정보를 얻고 기록하여 정보를 저장하기 위한 사이트

## 예상 기능:

- 내 주변 캠핑장 찾기, 지역별 캠핑장 검색, 내가 가본 캠핑장 기록

### 예상 사이트맵:

- home - myCamping, search, 404

### 계획:

- home - 복잡한 사이트를 이용 못하는 사용자들을 위해 쉽게 사용가능하도록 알아보기 쉬운 ui로 만들것
- mycamping - 내가 가본 캠핑장을 기록하는 곳(좋았던 곳과 안좋았던 곳을 저장해서 다음 캠핑때 참고 하기 위함)
- serch - 내 주변이 아니더라도 다른 지역으로 캠핑을 가고 싶어 하는 사람들을 위해 원하는 지역을 검색하면 근처 캠핑장이 나오게 구성 또는 소개받은 캠핑장을 검색하여 정보를 얻기 위한 목적

#### 디자인 일정(3일)

    12.8(금): 기획안 컴펌 후 디자인 리서치
    12.9(토): 디자인 리서치 & 와이어 프레임 제작(모바일 사이즈)
    12.10(일): 반응형 디자인 제작

#### 개발 진행(9일)

    12.11(월): 라우터 제작 후 필요한 api 연결 후 확인
    12.12(화): 헤더 및 푸터 제작 및 홈 제작
    12.13(수): 서치 제작
    12.14(목): 마이캠핑 제작
    12.15(금): 로딩, 404페이지 제작 및 필요한 기능 추가 제작
    12.16(토): 필요한 기능 추가 제작 및 인터렉션 제작
    12.17(일): 필요한 기능 추가 제작 및 컴펌
    12.18(월): 배포 테스트 및 오류 확인 후 수정
    12.19(화): 마무리 배포테스트

#### 개발 순서

    [x] 라우터 연결

> react-router-dom을 사용하여 페이지를 연결하였다.

    [x] 깃허브 연결

> 깃허브에 연결해서 관리가 용이하게 하였다.

    [x] 필요한 api 연결

> axios와 react-query를 사용하여 api를 호출하였다. 그리고 카카오지도를 스크립트로 다운받아서 연결하였다.

    [x] 검색 폼 제작 후 연결 확인

> 검색폼을 테스트용으로 제작후 검색어를 입력하면 그에 맞는 검색 기록과 지도의 위치가 바뀌는지 확인하였다. 그리고 현재 위치를 가져오는 메서드를 이용해서 현재위치를 가져오는 함수를 만들었다. 만드는 과정에서 오류도 나고 원하는 대로 되지 않을 때도 있었지만 코드를 썼다 지웠다 하며 시행착오 끝에 해결하였다. 그리고 현재위치를 나타내는 표시와 캠핑장을 나타내는 표시를 추가하였다.

    [x] 헤더 제작

    [x] 푸터 제작

    [x] 검색폼 제작

> 테스트가 아닌 검색 폼을 제작하여 헤더나 푸터처럼 모든 페이지에 나타나게 하였다. 이 과정에서 검색값을 search 컴포넌트에 어떻게 전달 할 것인가를 생각해 봤다. 전부터 사용해보고 싶던 redux라는 것을 홈페이지와 다른 개발자들의 글을 읽고 공부하고 적용해 보았다. 그 결과 잘 작동하였다. 하지만 콘솔창에 상태가 변경되었을 때 불필요한 랜더링이 될수도 있다고 경고가 떴다. 그래서 경고를 검색하고 해결 방법을 찾기 위해 챗지피티에게도 물어보았다. 경고창이 안뜨게 되었지만 검색값이 누락되는 문제가 있었다. 알고보니 리듀서함수에서 리턴값을 잘못 작성했었다. 제대로 작성하고 검색을 해보니 지도의 위치도 잘 이동하고 잘 작동하였다.

    [x] home 제작
    [x] search 제작

> 좋아요와 싫어요 버튼을 만드는데 처음에 쉽게 생각해서 useState를 이용해보았다. 상태가 변화하면 그 값이 다 같이 변하여 좋아요 버튼을 누르게되면 콘텐츠 전체에 좋아요가 눌러졌다. 그래서 나는 클릭 이벤트의 currentTarget을 이용하여 내가 누르는 엘리먼트를 가져와 클릭하면 클래스네임이 추가되게 하였다. 그 다음에는 클릭 될때마다 폰트어썸으로 가져온 아이콘이 색상이 없는것에서 있는것으로 변경되어야 했다. 클릭할때 내가 클래스네임을 추가시켜서 그 클래스네임이 있으면 변경되게 할 생각이였다. 하지만 map 함수 안에 있는 버튼중 내가 클릭한 콘텐츠의 버튼을 가져와야 했다. 그래서 나는 map함수를 쓴 요소의 상위 요소를 useRef로 값을 가져왔다. 나는 그 값을 가져와서 차례차례 자식노드를 찾아가면서 버튼을 찾아냈다. 더 쉬운 방법도 있을수도 있지만 내가 생각해낸 방법은 이 방법이였다. 그리고 map 함수의 index를 이용하여 각 콘텐츠마다의 버튼을 선택하는데 성공했다. 하지만 여기서 버튼을 클릭하면 랜더링이 되지않아 버튼이 변경되지 않았다. 그래서 내가 생각해낸 방법은 상태변경을 이용하는 것이였다. 상태변경이 이뤄지면 리랜더링된다고 알고 있었기 때문이다. 간단하게 카운트하는 상태변수를 만들어서 버튼을 누를때마다 카운트가 올라가게 하였다. 그래서 클래스가 있는지 확인하는 조건문을 통해 변경 시킬 수 있었다. 그 다음 문제는 좋아요 버튼이 눌러진 상태로 싫어요 버튼을 누르면 좋아요 버튼의 색상이 없어지는 작업을 해야했다. 그래서 나는 기존에 이용한 버튼 이벤트의 타겟을 형제 노드에 타겟 시켰다. 그래서 클릭하면 형제노드의 클래스네임을 삭제하는 과정을 통해 만들 수 있었다.

    [x] select 폼 제작 후 연결 확인
    [x] my_camping 제작

> 마이캠핑 페이지에 좋아요 누른 데이터와 싫어요 누른 데이터를 가져와야했다. 그래서 나는 redux로 상태관리를 하여 가져왔다. 콘텐츠 아이디를 가져오면 보여주는 api가 있었으면 좋았을텐데 없기 때문에 나는 좋아요를 누른 데이터의 정보를 하나씩 빼내서 가져올 수 밖에 없었다. 데이터를 useDispatch를 사용하여 type을 지정하고 배열안의 객체로 저장을 했다. 그리고 useSelector을 사용하여 그 데이터를 가져오는데 성공하였다. 하지만 좋아요를 취소하면 배열에서 삭제 되어야 하기에 dispatch로 다른 type을 지정하여 값을 가져오는 객체를 배열에 저장하였고 리듀서 함수에서 filter() 메소드를 이용하여 그 값이 없는 배열을 가져와 리턴하니 좋아요가 취소되면 그 값도 삭제가 되었다. 좋아요 등록 및 삭제, 싫어요 등록 및 삭제 이렇게 4가지의 타입을 작성하였다. 그리고 좋아요를 눌렀던 데이터를 싫어요를 누르면 또 좋아요 쪽에서 삭제가 되어야 했다. 이것은 dispatch를 두번 작성하니 쉽게 해결되었다. <br/> 그 다음에 해결해야 할 일은 마이캠핑으로 돌아와 좋아요나 싫어요를 취소를 하면 삭제를 시켜야 했다. 위에 했던거와 마찬가지로 dispatch로 삭제시키는 타입을 작성했다. 하지만 리랜더링이 되지않아 누르면 바로 삭제가 되지 않았다. 그래서 나는 카운트 상태를 만들어서 버튼을 클릭시 카운트가 되게 만들었다. 하지만 그래도 역시 제대로 동작하지 않았다. 그래서 나는 부모 컴포넌트를 리랜더링 시켜야겠다고 생각해서 자식컴포넌트에서 버튼을 누르면 부모 컴포넌트가 리랜더링이 되도록 부모컴포넌트에서 함수를 작성하고 그 함수를 자식 컴포넌트에게 props로 넘겨서 자식 컴포넌트의 버튼을 누르면 부모컴포넌트에 있는 카운트상태가 변화하도록 작성하니 내가 원하는 대로 삭제버튼을 누르면 삭제가 바로 되었다.

    [x] loading 제작
    [] 404 제작
    [] 모바일 반응형 제작

#### 설치 라이브러리

- React Router DOM
- axios
- @tanstack/react-query
- react-hook-form
- styled-components
- styled-reset
- fontawesome
- react-redux
- redux
- gh-pages
